{% load templatetags %} {% load tz %} {% block content %}
<div class="month ">
  <ul class="d-flex align-items-center">
    <button
    class="prev btn"
    hx-get="{% url 'view_prev_month' %}"
    hx-target="#container"
    >
    &#10094;
  </button>
  <button
  class="next btn"
  hx-get="{% url 'view_next_month' %}"
  hx-target="#container"
  >
  &#10095;
</button>
<li>
  <span class="mx-1">{{ date|date:"F" }}</span><span style="-size: 18px">{{ date.year }}</span>
</li>
  </ul>
</div>

<ul class="weekdays border-bottom border-dark">
  <li>Måndag</li>
  <li>Tisdag</li>
  <li>Onsdag</li>
  <li>Torsdag</li>
  <li>Fredag</li>
  <li>Lördag</li>
  <li>Söndag</li>
</ul>

<ul class="days mb-0">
  {% now "j" as current_day %}
  {% now "n" as current_month %}
  {% with month=date.month %}
  {% for i in month|get_days_in_month %}
  <li class="position-relative">
    <button id="day-{{ i }}"
      class="btn btn-light d-flex justify-content-center p-0"
      hx-get="{% url 'show_create_event_form' i %}"
      hx-target="#event-container"
      hx-swap="settle:0.5s"
    >
    {% if i|stringformat:'s' == current_day and current_month == date.month|stringformat:'s' %}
      <p class="day-current">
        <strong>{{ i }}</strong>
      </p>
      {% else %}
      <div>

      <p 
        id="day-{{ i }}-p" 
        class="day"
      >
        {{ i }}
      </p>
      </div>
      <div class="badge-container">
      {% for event in events %}
      {% if event.date.day == i %}
        <span class="badge custom-badge mt-3">{{ event.medicine.name }}</span>
      {% endif %}
      {% endfor %}
      </div>
    {% endif %}
    </button>
  {% endfor %} {% endwith %}
  </li>
</ul>
{% endblock %}
